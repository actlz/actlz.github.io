(function(){function q(){window.COLLAPS_CONF?t(window.COLLAPS_CONF):u(g+"/autochange/settings/domain/","settings",t)}function t(b){if(!b.dom_id&&!b.replaces.length)return h("set dom_id or replaces");(new Image).src="https://stats.embedcdn.cc/player?hit=script&sub=replace&host="+location.hostname;var d=b.kinopoisk_var;if(d=b.kinopoisk_id||d&&window[d])r(g+"/autochange/info/kinopoisk?id="+d,"kp "+d,b);else if(b.title){var a=g+"/autochange/info/link?title="+b.title.toLowerCase();a+=z(b,"year","charset",
"separator","season","episode");r(a,b.title,b)}else{d=document.title||document.getElementsByTagName("title")[0].innerHTML;d=d.replace(/ /g," ");var c;for(c in b.templates){var e=b.templates[c];if(a=d.match(new RegExp(e.regexp,"i"))){var f=e.order;break}}a?(c=a[f[0]].toLowerCase())?(a=g+"/autochange/info/link?separator="+b.separator+"&title="+c+(a[f[1]]?"&year="+a[f[1]]:"")+(a[f[2]]?"&season="+a[f[2]]:"")+(a[f[3]]?"&episode="+a[f[3]]:""),r(a+"&charset="+b.charset,c,b)):h("no title"):h("templates isn't match")}}
function u(b,d,a,c){var e=new XMLHttpRequest;e.open("GET",b);e.onreadystatechange=function(){if(4===e.readyState)if(204===e.status)h(d+" not found"),c&&"function"==typeof c&&c();else{if(200!==e.status)return h("api request failed");a(JSON.parse(e.response))}};e.send()}function z(b){for(var d="",a,c=1;c<arguments.length;c++)a=arguments[c],b[a]&&(d+="&"+a+"="+b[a]);return d}function r(b,d,a){u(b,d,function(c){c=c.url;var e=a.frame_params;if(e){e=e.join("&");var f=~c.indexOf("?")?"&":"?";c=e?c+f+e:c}v(a.dom_id,
c,a.width,a.height);w(a.replaces||[],c)},a.not_found_cb)}function v(b,d,a,c){if(b){var e=document.getElementById(b);if(!e)return setTimeout(v.bind(null,b,d,a,c),50);var f=b="";a&&"0"!==a&&(b=' width="'+a+'"');c&&"0"!==c&&(f=' height="'+c+'"');a=b+f+' allowfullscreen allow="autoplay *; fullscreen" frameborder="0" webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>';"https://api.multikland.net"==g?e.innerHTML='<iframe src="'+d+'"'+a:(e.innerHTML="<iframe "+a,x(d,function(k){var n=
e.getElementsByTagName("iframe")[0];n.contentDocument.write(k);n.contentDocument.close()}))}}function w(b,d){if(b.length){for(var a=document.getElementsByTagName("iframe"),c=0;c<a.length;c++){var e=a[c],f=e.src.match(/https?:\/\/(.+?)\/.+/);f&&-1!==b.indexOf(f[1])&&(e.src=d,y(e),"https://api.multikland.net"!=g&&x(d,function(k,n){return function(A){for(var l=document.createElement("iframe"),p=k.attributes,m=0;m<p.length;m++)"src"!==p[m].name&&l.setAttribute(p[m].name,p[m].value);k.parentElement.replaceChild(l,
k);y(l);l.contentDocument.write(A);l.contentDocument.close();h(n+" replaced")}}(e,f[1])))}setTimeout(w.bind(null,b,d),100)}}function x(b,d){var a=new XMLHttpRequest;a.open("GET",b);a.onreadystatechange=function(){4===a.readyState&&(200===a.status||404===a.status&&a.response&&~a.response.indexOf("\u0412\u0438\u0434\u0435\u043e \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043e"))&&d(a.response)};a.send()}function y(b){b.hasAttribute("allowfullscreen")&&(b.allowFullscreen=
!0);b.setAttribute("allow","autoplay *; fullsreen");b.allow="autoplay *; fullsreen"}var g="https://api"+Date.now()+".kinogram.best",h=console.log.bind(console,"[collaps]");~navigator.userAgent.indexOf("iPhone")&&window.fetch&&"https:"===location.protocol?fetch("https://api.multikland.net/ping/",{method:"head"}).then(function(){g="https://api.multikland.net";q()})["catch"](q):q()})();