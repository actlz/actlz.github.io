(function(){function q(){window.COLLAPS_CONF?u(window.COLLAPS_CONF):v(g+"/autochange/settings/domain/","settings",u)}function u(a){if(!a.dom_id&&!a.replaces.length)return h("set dom_id or replaces");(new Image).src="https://stats.embedcdn.cc/player?hit=script&sub=replace&host="+location.hostname;if(a.id){var c=w(g+"/embed/movie/"+a.id,a.frame_params);r(a.dom_id,c,a.width,a.height)}else{var b=a.kinopoisk_var;if(b=a.kinopoisk_id||b&&window[b])t(g+"/autochange/info/kinopoisk?id="+b,"kp "+b,a);else if(a.title)c=
g+"/autochange/info/link?title="+a.title.toLowerCase()+x(a,"year","charset","separator","season","episode"),t(c,a.title,a);else{b=document.title||document.getElementsByTagName("title")[0].innerHTML;b=b.replace(/ /g," ");var d;for(d in a.templates){var e=a.templates[d];if(c=b.match(new RegExp(e.regexp,"i"))){var f=e.order;break}}c?(d=c[f[0]].toLowerCase())?(c=g+"/autochange/info/link?title="+d+x({year:c[f[1]],season:c[f[2]],episode:c[f[3]]},"year","season","episode")+"&separator="+a.separator+"&charset="+
a.charset,t(c,d,a)):h("no title"):h("templates isn't match")}}}function v(a,c,b,d){var e=new XMLHttpRequest;e.open("GET",a);e.onreadystatechange=function(){if(4===e.readyState)if(204===e.status)h(c+" not found"),d&&"function"==typeof d&&d();else{if(200!==e.status)return h("api request failed");b(JSON.parse(e.response))}};e.send()}function x(a){for(var c="",b,d=1;d<arguments.length;d++)b=arguments[d],a[b]&&(c+="&"+b+"="+a[b]);return c}function t(a,c,b){v(a,c,function(d){d=w(d.url,b.frame_params);r(b.dom_id,
d,b.width,b.height);y(b.replaces||[],d)},b.not_found_cb)}function w(a,c){if(!c)return a;var b=c.join("&"),d=~a.indexOf("?")?"&":"?";return b?a+d+b:a}function r(a,c,b,d){if(a){var e=document.getElementById(a);if(!e)return setTimeout(r.bind(null,a,c,b,d),50);var f=a="";b&&"0"!==b&&(a=' width="'+b+'"');d&&"0"!==d&&(f=' height="'+d+'"');b=a+f+' allowfullscreen allow="autoplay *; fullscreen" frameborder="0" webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>';"https://api.multikland.net"==
g?e.innerHTML='<iframe src="'+c+'"'+b:(e.innerHTML="<iframe "+b,z(c,function(k){var n=e.getElementsByTagName("iframe")[0];n.contentDocument.write(k);n.contentDocument.close()}))}}function y(a,c){if(a.length){for(var b=document.getElementsByTagName("iframe"),d=0;d<b.length;d++){var e=b[d],f=e.src.match(/https?:\/\/(.+?)\/.+/);f&&B(f[1],a)&&(e.src=c,A(e),"https://api.multikland.net"!=g&&z(c,function(k,n){return function(C){for(var l=document.createElement("iframe"),p=k.attributes,m=0;m<p.length;m++)"src"!==
p[m].name&&l.setAttribute(p[m].name,p[m].value);k.parentElement.replaceChild(l,k);A(l);l.contentDocument.write(C);l.contentDocument.close();h(n+" replaced")}}(e,f[1])))}setTimeout(y.bind(null,a,c),100)}}function B(a,c){for(var b,d=a.length,e=0;e<c.length;e++)if(b=c[e],b==a||"."==b[0]&&b===a.substring(d-b.length,d))return!0}function z(a,c){var b=new XMLHttpRequest;b.open("GET",a);b.onreadystatechange=function(){4===b.readyState&&(200===b.status||404===b.status&&b.response&&~b.response.indexOf("\u0412\u0438\u0434\u0435\u043e \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043e"))&&
c(b.response)};b.send()}function A(a){a.hasAttribute("allowfullscreen")&&(a.allowFullscreen=!0);a.setAttribute("allow","autoplay *; fullsreen");a.allow="autoplay *; fullsreen"}var g="https://api"+Date.now()+".kinogram.best",h=console.log.bind(console,"[collaps]");~navigator.userAgent.indexOf("iPhone")&&window.fetch&&"https:"===location.protocol?fetch("https://api.multikland.net/ping/",{method:"head"}).then(function(){g="https://api.multikland.net";q()})["catch"](q):q()})();