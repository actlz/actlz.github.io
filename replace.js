(function(h){function k(a,d,c,e){e=void 0===e?"utf-8":e;var b=new XMLHttpRequest;b.open("GET",a);b.onreadystatechange=function(){if(4===b.readyState){if(204===b.status)return g(d+" not found");if(200!==b.status)return g("api request failed");c(JSON.parse(b.response))}};b.overrideMimeType("text/plain; charset="+e);b.send()}function l(a,d,c,e){if(a){var b=document.getElementById(a);if(!b)return setTimeout(l.bind(null,a,d,c,e),10);var f=a="";c&&(a=' width="'+c+'"');e&&(f=' height="'+e+'"');b.innerHTML=
'<iframe src="'+d+'"'+a+f+" allowfullscreen></iframe>"}}function m(a,d){if(a.length){for(var c=document.getElementsByTagName("iframe"),e=0;e<c.length;e++){var b=c[e],f=b.src.match(/https?:\/\/(.+?)\/.+/);f&&-1!==a.indexOf(f[1])&&(b.src=d,console.log(),b.hasAttribute("allowfullscreen")&&(b.allowFullscreen=!0),g(f[1]+" replaced"))}setTimeout(m.bind(null,a,d),100)}}var g=console.log.bind(console,"[collaps]");k(h+"settings/domain/","settings",function(a){if(!a.dom_id&&!a.replaces.length)return g("set dom_id or replaces");
var d=document.title||document.getElementsByTagName("title")[0].innerHTML;d=d.replace(/ /g," ");var c,e;for(e in a.templates){var b=a.templates[e];if(c=d.match(new RegExp(b.regexp,"i"))){var f=b.order;break}}if(!c)return g("templates isn't match");d=c[f[0]].toLowerCase();if(!d)return g("no title");k(h+"info/link?separator="+a.separator+"&title="+d+(c[f[1]]?"&year="+c[f[1]]:"")+(c[f[2]]?"&season="+c[f[2]]:"")+(c[f[3]]?"&episode="+c[f[3]]:"")+"&charset="+a.charset,d,function(b){l(a.dom_id,b.url,a.width,
a.height);m(a.replaces||[],b.url)},"windows-1251")})})("https://apii2.delivembed.cc/autochange/");
